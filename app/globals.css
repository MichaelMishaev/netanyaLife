@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  html {
    @apply antialiased;
  }

  body {
    @apply bg-white text-gray-900;
  }

  /* RTL Support */
  [dir='rtl'] {
    direction: rtl;
  }

  [dir='ltr'] {
    direction: ltr;
  }

  /* Accessibility: High Contrast Mode */
  html.high-contrast {
    @apply bg-white;
  }

  html.high-contrast body {
    @apply bg-white text-black font-medium;
  }

  html.high-contrast a {
    @apply text-blue-800 underline;
  }

  html.high-contrast button {
    @apply border-2 border-black;
  }

  html.high-contrast .bg-primary-600 {
    @apply bg-black text-white;
  }

  html.high-contrast .text-primary-600 {
    @apply text-black;
  }

  html.high-contrast .border-gray-300 {
    @apply border-black;
  }

  html.high-contrast .text-gray-600,
  html.high-contrast .text-gray-700 {
    @apply text-black;
  }

  /* Accessibility: Underline Links */
  html.underline-links a {
    @apply underline;
  }

  /* Accessibility: Focus Visible */
  *:focus-visible {
    @apply outline-2 outline-offset-2 outline-primary-600;
  }

  /* Skip Link */
  .skip-link {
    @apply fixed left-0 top-0 z-[100] -translate-y-full bg-primary-600 px-4 py-2 text-white transition focus:translate-y-0;
  }

  /* Dark Mode Support */
  html.dark {
    @apply bg-gray-900 text-gray-100;
  }

  html.dark body {
    @apply bg-gray-900 text-gray-100;
  }

  html.dark .bg-white {
    @apply bg-gray-800;
  }

  html.dark .bg-gray-50 {
    @apply bg-gray-800;
  }

  html.dark .bg-gray-100 {
    @apply bg-gray-700;
  }

  html.dark .text-gray-900 {
    @apply text-gray-100;
  }

  html.dark .text-gray-700 {
    @apply text-gray-300;
  }

  html.dark .text-gray-600 {
    @apply text-gray-400;
  }

  html.dark .border-gray-200 {
    @apply border-gray-700;
  }

  html.dark .border-gray-300 {
    @apply border-gray-600;
  }

  html.dark .bg-gradient-to-r,
  html.dark .bg-gradient-to-br,
  html.dark .bg-gradient-to-l {
    @apply opacity-90;
  }
}

@layer utilities {
  /* Logical properties for RTL support */
  .ms-auto {
    margin-inline-start: auto;
  }

  .me-auto {
    margin-inline-end: auto;
  }

  /* Hide scrollbar but keep scrolling functionality */
  .scrollbar-hide {
    -ms-overflow-style: none; /* IE and Edge */
    scrollbar-width: none; /* Firefox */
  }

  .scrollbar-hide::-webkit-scrollbar {
    display: none; /* Chrome, Safari, and Opera */
  }

  /* Animations with Reduced Motion Support */
  @keyframes fade-in-up {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes fade-in {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }

  @keyframes float {
    0%, 100% {
      transform: translateY(0px);
    }
    50% {
      transform: translateY(-20px);
    }
  }

  @keyframes pulse-soft {
    0%, 100% {
      opacity: 1;
    }
    50% {
      opacity: 0.8;
    }
  }

  @keyframes gradient-shift {
    0%, 100% {
      background-position: 0% 50%;
    }
    50% {
      background-position: 100% 50%;
    }
  }

  @keyframes slide-down {
    from {
      opacity: 0;
      transform: translateY(-20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes scale-in {
    from {
      opacity: 0;
      transform: scale(0.95);
    }
    to {
      opacity: 1;
      transform: scale(1);
    }
  }

  @keyframes shimmer {
    0% {
      background-position: -1000px 0;
    }
    100% {
      background-position: 1000px 0;
    }
  }

  /* Apply animations only when user hasn't requested reduced motion */
  @media (prefers-reduced-motion: no-preference) {
    .animate-fade-in-up {
      animation: fade-in-up 0.4s ease-out;
    }

    .animate-fade-in {
      animation: fade-in 0.6s ease-out;
    }

    .animate-float {
      animation: float 3s ease-in-out infinite;
    }

    .animate-pulse-soft {
      animation: pulse-soft 2s ease-in-out infinite;
    }

    .animate-gradient {
      background-size: 200% 200%;
      animation: gradient-shift 8s ease infinite;
    }

    .animate-slide-down {
      animation: slide-down 0.3s ease-out;
    }

    .animate-scale-in {
      animation: scale-in 0.2s ease-out;
    }

    .animate-shimmer {
      animation: shimmer 2s infinite linear;
    }
  }

  /* Reduced motion: Disable all animations and transitions */
  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
      scroll-behavior: auto !important;
    }

    .animate-fade-in-up,
    .animate-fade-in,
    .animate-float,
    .animate-pulse-soft,
    .animate-gradient,
    .animate-slide-down,
    .animate-scale-in,
    .animate-shimmer {
      animation: none !important;
    }
  }

  /* Shimmer skeleton effect */
  .skeleton-shimmer {
    background: linear-gradient(
      90deg,
      #f0f0f0 0%,
      #f8f8f8 50%,
      #f0f0f0 100%
    );
    background-size: 1000px 100%;
  }

  html.dark .skeleton-shimmer {
    background: linear-gradient(
      90deg,
      #374151 0%,
      #4b5563 50%,
      #374151 100%
    );
    background-size: 1000px 100%;
  }
}

/* Print Stylesheet */
@media print {
  /* Hide navigation and interactive elements */
  header,
  footer,
  nav,
  .accessibility-button,
  .share-button,
  button,
  .language-switcher,
  .admin-logout-button,
  .cta-button,
  .filter-button {
    display: none !important;
  }

  /* Show only essential content */
  body {
    background: white !important;
    color: black !important;
    font-size: 12pt;
  }

  /* Business detail page optimizations */
  .business-detail {
    page-break-after: always;
  }

  .business-detail:after {
    content: '\A\A מקור: Netanya Local - netanyalocal.com';
    white-space: pre;
    display: block;
    margin-top: 2rem;
    padding-top: 1rem;
    border-top: 1px solid #ccc;
    font-size: 10pt;
    color: #666;
  }

  /* Clean up links for print */
  a {
    text-decoration: underline;
    color: black !important;
  }

  a[href]:after {
    content: ' (' attr(href) ')';
    font-size: 9pt;
    color: #666;
  }

  /* Avoid page breaks in important elements */
  .business-card,
  .review-card {
    page-break-inside: avoid;
  }

  /* Optimize images for print */
  img {
    max-width: 100% !important;
    page-break-inside: avoid;
  }
}
